<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Awash in Data - 14&nbsp; Calculating and Recoding</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./summary.html" rel="next">
<link href="./03.20-Grouping.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="awash.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Calculating and Recoding</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Awash in Data</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./01-lesson-part.html" class="sidebar-item-text sidebar-link">Lessons</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01.10-start.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Getting Started with CODAP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01.20-teens.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">800 Children and Teens, part&nbsp;one</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01.30-assignment-1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">A First Assignment</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01.40-teens2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">800 Children and Teens, part two</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01.50-assignment-2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">A Second Assignment</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01.60-project.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">A Small Project</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./02-portal-part.html" class="sidebar-item-text sidebar-link">Data Portals Overview</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02.10-census-acs.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">The Census/ACS Data Portals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02.20-BART.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">The BART Data Portal</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02.30-noaa-weather.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">The NOAA Weather Portals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02.40-nhanes-portal.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">The NHANES Data Portal</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./03-datamove-part.html" class="sidebar-item-text sidebar-link">Data Moves</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03.10-Filtering.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Filtering and Selection</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03.20-Grouping.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Grouping</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03.30-Calculating.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Calculating and Recoding</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Summary</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#a-simple-example-unit-conversion" id="toc-a-simple-example-unit-conversion" class="nav-link active" data-scroll-target="#a-simple-example-unit-conversion"><span class="toc-section-number">14.1</span>  A simple example: unit conversion</a></li>
  <li><a href="#recode-numeric-to-categorical-section" id="toc-recode-numeric-to-categorical-section" class="nav-link" data-scroll-target="#recode-numeric-to-categorical-section"><span class="toc-section-number">14.2</span>  Making Numeric Attributes Categorical</a></li>
  <li><a href="#recoding-categorical-section" id="toc-recoding-categorical-section" class="nav-link" data-scroll-target="#recoding-categorical-section"><span class="toc-section-number">14.3</span>  Reducing the number of categories in a categorical attribute</a></li>
  <li><a href="#by-the-way-always-make-a-new-column" id="toc-by-the-way-always-make-a-new-column" class="nav-link" data-scroll-target="#by-the-way-always-make-a-new-column"><span class="toc-section-number">14.4</span>  By the way: Always make a new column!</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="calculating-chapter" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Calculating and Recoding</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

    <script src="src/awash-functions.js"></script>
<p>Sometimes, the data you have is not in the form you want. This chapter addresses situations where you have the information in one or more attributes (columns), but it needs to be transformed somehow and placed in a <em>new column</em> that you can use to do what you want. This often (but not always) means that you will need a <em>formula</em> to compute the contents of that new column.</p>
<blockquote class="blockquote">
<p>Sometimes you will want to compute something like the mean or median. That’s a similar but different situation which we will talk about <a href="#summarizing-chapter">in the next chapter</a>, The difference is that a calculation like <code>mean()</code> takes input from an entire group of cases. It’s a <em>summary</em>, an <em>aggregate measure</em>, because the value, the mean, applies to the whole group rather than to each individual. It works a little differently.</p>
</blockquote>
<blockquote class="blockquote">
<p>Here, we will be computing values that apply to each case individually.</p>
</blockquote>
<section id="a-simple-example-unit-conversion" class="level2 page-columns page-full" data-number="14.1">
<h2 data-number="14.1" class="anchored" data-anchor-id="a-simple-example-unit-conversion"><span class="header-section-number">14.1</span> A simple example: unit conversion</h2>
<p>You have a bunch of data about the heights of children and teens. The problem is that the <code>Weight</code> attribute is measured in kilograms. For some reason, your audience will not understand this new-fangled metric system, so you decide to make your graphs in pounds instead.</p>
<p>The basic plan is simple: create a new column, give it a name (e.g., <code>WtLb</code>), and then give the new column a formula (<code>Weight * 2.2</code>). Here’s the step-by-step; try it out in the live illustration below.</p>
<ol type="1">
<li>Be sure the table is selected.</li>
<li>Click the gray circle with the plus sign near its upper right. A new column appears for the new attribute. Its name is selected, ready for entering.</li>
<li>Type the new name: <code>WtLb</code>. Then press <strong>enter</strong> to complete the edit.</li>
<li>Click on the new name. A menu appears. Choose <strong>Edit Formula…</strong>.</li>
<li>In the formula box, enter <code>Weight * 2.2</code> and press <strong>Apply</strong>. Notice that the formula you enter is <em>only the part to the right of the equals sign</em>.</li>
</ol>
<div class="column-page-right">
<script>
    theURL = "htmls-and-sources/weight-in-pounds.html";
    awash.liveDemoAt(theURL);
</script>
</div>
<p>Now you can change the graph to <code>WtLb</code> by dragging the new attribute name to replace the old one.</p>
<p>Small extra: Notice that <code>WtLb</code> has no units in parentheses. Let’s fix that.</p>
<ol type="1">
<li>Click <code>WtLb</code> just like we did to get the formula editor.</li>
<li>This time, choose <strong>Edit Attribute Properties…</strong> Notice what we have here. Cool stuff.</li>
<li>Enter <code>pounds</code> in the <strong>unit</strong> box.</li>
<li>Press <strong>Apply</strong>. Shazam! The units appear!</li>
</ol>
<blockquote class="blockquote">
<p>Fathom aficionados from the ancient years will justly lament the loss of units arithmetic. Good old Fathom actually knew the conversions.</p>
</blockquote>
</section>
<section id="recode-numeric-to-categorical-section" class="level2 page-columns page-full" data-number="14.2">
<h2 data-number="14.2" class="anchored" data-anchor-id="recode-numeric-to-categorical-section"><span class="header-section-number">14.2</span> Making Numeric Attributes Categorical</h2>
<p>You can use formulas to convert numerical attributes to categorical. Suppose you’re investigating income, but graphs with income on them quickly become complicated: they stretch over a wide range and they’re badly skewed.</p>
<p>So for exploratory purposes, you’d like to divide the population into two groups:</p>
<ul>
<li>Those making $40,000 or more, which you will label <code>"$$"</code>, and</li>
<li>everybody else, which you will label <code>"$"</code>.</li>
</ul>
<p>Here’s how to do it; use the example live document below.</p>
<ol type="1">
<li>With the table selected, click the gray circle with the plus sign to make a new attribute.</li>
<li>Give it a good name (e.g., <code>money</code>) and press <strong>enter</strong> to complete the edit.</li>
<li>Click the new name to get the menu, and choose <strong>Edit formula…</strong>.</li>
<li>In the formula editor, enter <code>if(TotalIncome &gt;= 40000, "$$", "$")</code>. Press <strong>Apply</strong>. The column should fill with values. Don’t leave out the quote marks!</li>
<li>Make a graph that uses your attribute. For example, put <code>EmplStatus</code> on one axis, and then plop <code>money</code> into the middle. Aha! Employed people are more likely to be in the <code>$$</code> group!</li>
</ol>
<div class="column-page-right">
<script>
    theURL = "htmls-and-sources/ACS-CA-2013-1000peeps.html";
    awash.liveDemoAt(theURL);
</script>
</div>
<p>Notice how that <code>if()</code> function works. It’s like the one in most spreadsheets, and takes three arguments. Consider this formula for an attribute called <code>kindOfPet</code>:</p>
<p><code>if(sound = "woof", "dog", "cat")</code></p>
<ul>
<li>The first is a “Boolean” expression, either true or false.</li>
<li>The second is what you get if the expression is true (the pet is a dog).</li>
<li>The third is what you get if the expression is false (the pet is a cat).</li>
</ul>
<p>Use <code>money</code> as you would any attribute. You can use it to make graphs, and you can use it in other calculations.</p>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Gotcha! (still true, May 2023)
</div>
</div>
<div class="callout-body-container callout-body">
<p>However: If you drag <code>money</code> to the left to make groups—a perfectly reasonable thing to do—CODAP will not do what you want. Why not? CODAP tries to apply that formula to the entire group (as it would <code>median(TotalIncome)</code>) and it can’t because there are many different values of <code>TotalIncome</code> in the group, so it can’t tell what value to assign to <code>money</code>.</p>
<p>Therefore, before you drag, click on the column header, and in the menu that appears, choose <strong>Delete Formula (Keeping Values)</strong>. Now the <code>money</code> column—filled with <code>$$</code> and <code>$</code>—is just as if you had typed in every value separately.</p>
<p>Just be aware: now, if you change someone’s <code>TotalIncome</code>, their <code>money</code> value will not change, because <em>you deleted the formula</em>. Similarly, if you import more data, there is no formula to fill in new values for <code>money</code>.</p>
</div>
</div>
</section>
<section id="recoding-categorical-section" class="level2 page-columns page-full" data-number="14.3">
<h2 data-number="14.3" class="anchored" data-anchor-id="recoding-categorical-section"><span class="header-section-number">14.3</span> Reducing the number of categories in a categorical attribute</h2>
<p>Sometimes, a categorical attribute has many categories, and you want to group them together. With States, for example, you might want to group them by “region,” so you would put California, Oregon, and Washington into a region called “Pacific,” and so forth for the rest of the states.</p>
<p>Let’s practice this skill with something simpler, using the data we just used above. We are going to reduce the six categories in <code>Education</code> to two categories: <code>collegiate</code>, which means they went to college at all, and <code>no college</code>, which means they never did.</p>
<p>We <em>could</em> make a formula, but it would be ugly and complicated. Instead, we will simply type the new values in.</p>
<p>Won’t that take a long time? We have 1000 cases! No, because we’ll type them only once. Do this using the live illustration below:</p>
<ol type="1">
<li>Drag <code>Education</code> left to make (six) groups by education level. Select the table.</li>
<li>Click the “left” gray circle (the “add attribute” circle), just above and to the right of <strong>Education</strong>. This makes a new column.</li>
<li>Name it <code>college</code>.</li>
<li>In that column, enter the appropriate values for each category. That is, double-click the <em>cell</em> and actually type <code>collegiate</code> or <code>no college</code>. You can use <strong>Copy</strong> and <strong>Paste</strong> if you like.</li>
<li>You have now <em>re-coded</em> <code>Education</code> so that the “improved” values are in <code>college</code>. You no longer need <code>Education</code> to make your groups, so drag it back to the right. Now you have only two groups (the <code>college</code> groups) on the left.</li>
</ol>
<div class="column-page-right">
<script>
    theURL = "htmls-and-sources/ACS-CA-2013-1000peeps.html";
    awash.liveDemoAt(theURL);
</script>
</div>
<p>You can use this new attribute as you would any other:</p>
<ol start="5" type="1">
<li>Make a graph with <code>Gender</code> on the horizontal axis.</li>
<li>Plop <code>college</code> into the middle of the graph.</li>
<li>In the “configuration” palette (below the ruler palette on the graph), choose <strong>Fuse Dots Into Bars</strong>.</li>
<li>Hover over the bars; what do you learn from the percentages that appear?</li>
</ol>
<p>Also,</p>
<ol start="9" type="1">
<li>Make a graph of <code>TotalIncome</code> with the new attribute, <code>college</code>, on the other axis. A useful, telling graph! Stay in school, kids…</li>
</ol>
</section>
<section id="by-the-way-always-make-a-new-column" class="level2" data-number="14.4">
<h2 data-number="14.4" class="anchored" data-anchor-id="by-the-way-always-make-a-new-column"><span class="header-section-number">14.4</span> By the way: Always make a new column!</h2>
<p>This is a practice you should ingrain into your data-analysis muscle memory: <strong>Avoid destroying data</strong>.</p>
<p>Seems obvious, but the techniques we mentioned here sometimes lead students into that trap.</p>
<p>So: When you’re recoding <code>Education</code> into <code>anyCollege</code>, you might be tempted to (<strong>do not do this!</strong>):</p>
<ol type="1">
<li>Drag <code>Education</code> left to make six groups be education level.</li>
<li>Edit <code>graduate</code>, <code>bachelor's</code>, and <code>some college</code> to be <code>collegiate</code>.</li>
<li>Edit the rest to be <code>no college</code>.</li>
</ol>
<p>Do you see the problem? You have overwritten the original data. Suppose, later, you decide you want your collegiate group to be only people who have finished a bachelor’s degree? You no longer have anyone with <code>some college</code> to move from one category to the other.</p>
<p>Therefore, <em>leave the original data as it is, and put any new data in a new column</em>. Then if you change your mind, you don’t have to start over.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./03.20-Grouping.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Grouping</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./summary.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Summary</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>